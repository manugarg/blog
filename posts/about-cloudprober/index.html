<!doctype html><html><head><title>About Cloudprober</title>
<meta charset=utf-8><meta name=X-UA-Compatible content="IE=edge"><meta name=google-site-verification content><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name=viewport><meta content="telephone=no" name=format-detection><meta name=description content="I started building Cloudprober in 2016, while I was at Google, leading the Cloud Networking SRE team there. Google Cloud was just beginning to grow big, and we were still grappling with some early growth issue."><meta name=renderer content="webkit"><meta name=theme-color content="#ffffff"><script async src="https://www.googletagmanager.com/gtag/js?id=G-WJGGB5EHFQ"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-WJGGB5EHFQ")}</script><script src=/js/toc.js></script><link type=text/css rel=stylesheet href=/vendor/css/bootstrap.min.css><link rel=stylesheet href=/scss/dark-mode.min.cb53f1bee2b8900cb4f082afbf00175d6618f281cf9a2fe8619e3b52d20b5721.css integrity="sha256-y1PxvuK4kAy08IKvvwAXXWYY8oHPmi/oYZ47UtILVyE=" media=screen><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Material+Icons"></head><body><div id=app><div class=single-column-drawer-container id=drawer v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }"><div class=drawer-content><div class=drawer-menu><a class="a-block drawer-menu-item false" href=/categories>Categories
</a><a class="a-block drawer-menu-item false" href=/tags>Tags
</a><a class="a-block drawer-menu-item active" href=/posts>Archive</a><div class=toc><div class=toc-content><center>- CATALOG -</center><ul><ul><li><a href=#origin class=nav-origin>Origin</a></li><li><a href=#scale-efficiency class=nav-scale-efficiency>Scale, Efficiency</a></li><li><a href=#beyond-google-and-open-source class=nav-beyond-google-and-open-source>Beyond Google and Open-Source</a></li><li><a href=#move-away-from-google-github class=nav-move-away-from-google-github>Move away from Google Github</a></li><li><a href=#growth-and-stability class=nav-growth-and-stability>Growth and stability</a></li></ul></div></div></div></div></div><transition name=fade><div id=drawer-mask v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if=isDrawerOpen v-on:click=toggleDrawer></div></transition><nav id=navBar class="navbar sticky-top navbar-light single-column-nav-container"><div id=navBackground class=nav-background></div><div class="container container-narrow nav-content"><button id=nav_dropdown_btn class=nav-dropdown-toggle type=button v-on:click=toggleDrawer>
<i class=material-icons>menu
</i></button>
<a id=navTitle class=navbar-brand href=http://blog.manugarg.com/>Manu's Blog
</a><button type=button class=nav-darkmode-toggle id=darkModeToggleButton2>
<i class=material-icons id=darkModeToggleIcon2>dark_mode</i></button></div></nav><div class=single-column-header-container id=pageHead v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }"><a href=http://blog.manugarg.com/><div class=single-column-header-title>Manu's Blog</div></a></div><div id=content><div id=streamContainer class=stream-container><link href=/pagefind/pagefind-ui.css rel=stylesheet><script src=/pagefind/pagefind-ui.js></script><div id=search></div><script>window.addEventListener("DOMContentLoaded",e=>{new PagefindUI({element:"#search",showSubResults:!0})})</script><div class="post-list-container post-list-container-shadow"><div class=post><div class=post-head-wrapper-text-only><div class=post-title>About Cloudprober<div class=post-meta><time itemprop=datePublished>2023-10-05 00:00
</time><i class=material-icons>folder</i>
<a href=/categories/cloudprober>Cloudprober</a>
&nbsp;</div></div></div><div class=post-body-wrapper><div class=post-body v-pre><h2 id=origin>Origin</h2><p>I started building Cloudprober in 2016, while I was at Google, leading the Cloud
Networking SRE team there. Google Cloud was just beginning to grow big, and we
were still grappling with some early growth issue. Our biggest problem was that
our customers were discovering problems before us, which resulted in bad
experience for our customers and huge time sink for my team in debugging those
issues.<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</p><p>Google&rsquo;s existing monitoring tools didn&rsquo;t work well in Cloud, necessitating the
need to build things from ground up. And since probers are the cornerstone of
monitoring and reliability at Google<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>, that&rsquo;s where we decided to start.
<em>Thus began the journey of Cloudprober</em>.</p><p>Even though the primary goal of Cloudprober at that time was to discover and
alert on Cloud Networking availability and performance problems, we decided to
develop it as a generic prober that could be used to monitor a wide variety of
systems and services. We also decided to make Cloudprober open source so that a
wider community could trust it, contribute to it, and run it on their own
systems.</p><h2 id=scale-efficiency>Scale, Efficiency</h2><p>For scales as big as Google Cloud, horizontal scalability and efficiency become
critical requirements, and for a monitoring software to be useful reliability is
super important as well. Keeping these requirements in mind, our goal for
Cloudprober was for it to be able to reliably monitor 100s of 1000s of endpoints
(IPs, Ports, HTTP/S URLs, etc) from each instance, while keeping the resource
requirements and management overhead very low<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>.</p><p>Cloudprober maximizes resources utilization by relying heavily on Go concurrency
(<em>resource efficiency</em>), supports probing large number of targets in parallel at
a high frequency (<em>each instance does more</em>), minimizes the need of frequent
updates by supporting dynamic targets discovery (<em>ease of management</em>), has
native implementations for common probe types (<em>efficiency</em>), and so on.</p><h2 id=beyond-google-and-open-source>Beyond Google and Open-Source</h2><p>We
<a href=https://opensource.googleblog.com/2018/03/cloudprober-open-source-black-box.html>open-sourced</a>
Cloudprober in 2017. That brought in a new phase in its evolution. We added many
features over time to make it more useful to the wider community, such as
first-class Kubernetes support, a built-in probe status UI, PostgreSQL and
Cloudwatch surfacers, OAuth support, Validators, and most recently, built-in
alerting capability.</p><p>We used the same codebase for the internal and open-source versions, which was
more work but it created a huge advantage &ndash; our own extensive internal
deployment provided a continuous testing platform for Cloudprober, particularly
for its scalability and performance aspects, while we added all these features.</p><h2 id=move-away-from-google-github>Move away from Google Github</h2><p>I left Google in Nov 2021. To keep working on Cloudprober independently, I moved
Cloudprober&rsquo;s Github repository from
<a href=https://github.com/google/cloudprober>github.com/google/cloudprober<a>
to
<a href=https://github.com/cloudprober/cloudprober>github.com/cloudprober/cloudprober</a>.
This was a disruptive move and we lost a lot of Github stars in the process
(1.4k - :smiley:), but overall it was a good move as Cloudprober has grown much
faster after becoming independent.</p><p>While I can&rsquo;t say this authoritatively now as I don&rsquo;t work there anymore, from
what I know, Google still uses Cloudprober, in fact, even more widely now.</p><h2 id=growth-and-stability>Growth and stability</h2><p>Throughout its journey, Cloudprober has continuously adapted and expanded to
meet the evolving needs of its users<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>. To ensure that Cloudprober thrives and
evolves robustly, we&rsquo;ve been very diligent that it grows in a structured way, a
commitment we&rsquo;ll uphold in future as well.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>A customer-reported infrastructure issue is much harder to debug than an
issue discovered by your own monitoring.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Almost all of Google&rsquo;s systems rely on probers to detect customer facing
problems.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>Hostinger was able to probe 1.8M targets using a single instance:
<a href=https://www.hostinger.com/blog/cloudprober-explained-the-way-we-use-it-at-hostinger>blog</a>.&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>I think it&rsquo;s an essential trait for any software. Software that don&rsquo;t evolve
with time wither away.&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div><hr width=100% id=EOF><p style=color:#777>Last modified on 2023-10-20</p></div></div><nav class=post-pagination><a class=newer-posts>Next<br>No newer posts.
</a><a class=older-posts>Previous<br>No older posts.</a></nav><div class=post-comment-wrapper><script src=https://giscus.app/client.js data-repo=manugarg/blog data-repo-id=R_kgDOMIFpRw data-category=General data-category-id=DIC_kwDOMIFpR84CgCDt data-mapping=title data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=en crossorigin=anonymous async></script></div></div></div></div></div><div id=sideContainer class=side-container><a class="a-block nav-head false" href=http://blog.manugarg.com/><div class=nav-title>Manu's Blog</div></a><div class=nav-link-list><a class="a-block nav-link-item false" href=/categories>Categories
</a><a class="a-block nav-link-item false" href=/tags>Tags
</a><a class="a-block nav-link-item active" href=/posts>Archive</a></div><div class=nav-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
2024 Manu's Blog</div></div><div id=extraContainer class=extra-container><div class=toc-wrapper><div class=toc><div class=toc-content><center>- CATALOG -</center><ul><ul><li><a href=#origin class=nav-origin>Origin</a></li><li><a href=#scale-efficiency class=nav-scale-efficiency>Scale, Efficiency</a></li><li><a href=#beyond-google-and-open-source class=nav-beyond-google-and-open-source>Beyond Google and Open-Source</a></li><li><a href=#move-away-from-google-github class=nav-move-away-from-google-github>Move away from Google Github</a></li><li><a href=#growth-and-stability class=nav-growth-and-stability>Growth and stability</a></li></ul></div></div></div><div class=pagination><a id=globalBackToTop class="pagination-action animated-visibility" href=#top :class="{ invisible: scrollY == 0 }"><i class="material-icons pagination-action-icon">keyboard_arrow_up
</i></a><a type=button class=pagination-action id=darkModeToggleButton><span class="material-icons pagination-action-icon" id=darkModeToggleIcon>dark_mode</span></a></div></div><div id=single-column-footer>Hugo Theme <a href=https://github.com/amazingrise/hugo-theme-diary>Diary</a> by <a href=https://risehere.net/>Rise</a><br>Ported from <a href=https://mak1t0.cc/ target=_blank rel="noreferrer noopener">Makito</a>'s <a href=https://github.com/SumiMakito/hexo-theme-journal/ target=_blank rel="noreferrer noopener">Journal.</a><br><br>&copy;
2024 Manu's Blog</div></div><script src=/js/journal.js></script></body></html>